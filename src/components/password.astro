<head>
    <title>Repl Auth</title>
  </head>
  <body>
    <h1>Enter the code to unlock the page</h1>
    <input type="text" id="codeInput" placeholder="Enter code">
    <button onclick="checkCode()">Unlock</button>
    <p id="message"></p>

    <div>
      <script
        authed="location.reload()"
        src="https://auth.util.repl.co/script.js"
      ></script>
    </div>

    <script>
      function checkCode() {
        let codeInput = document.getElementById("codeInput").value;
        let message = document.getElementById("message");
        let encodedCode = btoa(codeInput);

        if (encodedCode === "MTIz") {
          let currentTime = new Date();
          let timestamp = currentTime.toLocaleString();
          message.innerHTML = `Access granted! Time: ${timestamp}`;
          window.location.href = "https://www.pump.fun";

          // Send email
          sendEmail("cannons.for.u@gmail.com", "openned");
        } else {
          message.innerHTML = "Incorrect code. Try again.";
        }
      }

      function sendEmail(to, subject) {
        // Replace with your email credentials
        const senderEmail = "your_email@gmail.com"; 
        const senderPassword = "your_password"; 

        const msg = new MIMEText("The code was unlocked.");
        msg["Subject"] = subject;
        msg["From"] = senderEmail;
        msg["To"] = to;

        try {
          const server = smtplib.SMTP("smtp.gmail.com", 587);
          server.starttls();
          server.login(senderEmail, senderPassword);
          server.sendmail(senderEmail, to, msg.as_string());
          server.quit();
          console.log("Email sent successfully.");
        } catch (error) {
          console.error("Error sending email:", error);
        }
      }
    </script>
  </body>